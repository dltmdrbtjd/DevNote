## 오늘 내가 작업한 것
- 검색창 기능
- 유저정보 컴포넌트
- 유저정보 컴포넌트에서 유저정보 받아오기 및 비밀번호 변경
- 로그인 후 토큰값 받고 request 헤더에 토큰넣고나서 다른 동작들에 대한 api보내기

## 목록
- 검색창 기능 관련 : 검색창은 우선 뷰는 같이 작업하신분이 미리 만들어놓으셔서 뷰쪽은 건드리지 않았고 기능을 이제 서버와 연결시켜줘서 그 목록에 해당하는 데이터만 뿌려주도록 처리했다. 이 작업은 크게 어렵지 않았고 중간에 찾아낸 문제점은 검색후에 로고클릭후 첫 페이지로 돌아가도 전체리스트가 다시 돌아오지않는 문제점이 있었다. 그래서 다시 메인페이지로 돌아가면 원래 리스트를 가져오도록 수정했다. 서버와 통신은 query string으로 검색어를 보내줘서 데이터를 받는 방식으로 처리했다. 검색 부분은 우선 이정도로 모두 마무리했다.

- 유저정보 컴포넌트 관련 : 우선 뷰 부분은 크게 어렵지 않게 구성했고 이제 서버에서 get요청으로 현재 해당로그인한 유저의 아이디,이메일을 받아오고 그 값을 보여준다음에 현재 비밀번호를 입력해서 확인한 다음에 새로운 비밀번호를 작성하여 변경할 수 있도록 만들었기 때문에 현재 비밀번호 작성후 post로 서버에서 확인응답을 받고 그 다음 새로운 비밀번호를 다시 put요청으로 수정하여서 적용시키게끔 만들었다. 중간중간 현재 비밀번호가 확인이 되지않았거나 새로운 비밀번호가 일치하지 않을때의 경우의 예외처리를 모두 해주고 끝내었다. 그리고 중간에 유저정보창으로 이동하고 메인으로 돌아오면 유저정보를 잃어버리는 문제가 발생했었는데 그건 유저정보 페이지 이동시 리덕스에서 유저의 값을 받는부분을 로그인할때와 다르게 설정한 부분이 1곳이 있어서 발생한 오류였다. 그래서 막 게시글 수정,삭제도 안되고 당황했었는데 다행히 빠르게 찾아내서 오류를 해결했다.

- 토큰관련 이슈 : 시간을 가장 많이 잡아먹었었는데 처음에 이제 로그인을 하고나서 다음 동작들을 하려고할때 (ex.게시글작성,수정,삭제...) 서버로 보내는 통신의 헤더에 토큰이 담겨있지 않은 문제가 있었다. 웃긴건 새로고침하면 다시 모두 정상 작동을했다. 그래서 계속해서 시도하다보니 첫 로그인을 하면 쿠키에는 토큰값이 담기는게 정상으로 확인이 되는데 이제 그 후에 다른 동작들로 서버에 확인을 받기위해 토큰을 같이 보내면 그때는 토큰이 들어있지 않은 상태가 되어있었다. 즉 비동기통신간의 순서에서 문제가 생긴것으로 생각해서 후처리하는 부분에 토큰을 실어보내기도 해보고 요청시에 강제로 토큰을 넣어서 보내보기도하고 했는데 모두 실패였다. 당연했다. 로그인을 하자마자인 상태에선 헤더에 토큰이 담겨있지 않기때문에 로그인하고 헤더에 토큰을 담고 다음동작들을 수행하게 할 수 있는 중간 미들웨어가 필요했다. 그래서 찾아보다가 interceptors라는 방법을 찾아내서 interceptors.reuquest.use에서 이 안에서 토큰값을 받아오고 헤더에 넣어서 보내주고 나서 동작들을 처리하게끔 하니까 이 문제를 해결했었다. 생각보다 좀 시간을 많이 잡아먹긴했는데 새로운 개념을 익히기도했고 비동기통신의 순서에 대해서 좀 더 알아가게되어서 좋은 경험이였다.
