## DOM과 가상돔
- 우선 라이프 사이클에 대해 설명하기전 가상돔에 대해서 설명하도록 하겠다. DOM은 우선 html단위 하나하나를 객체로 생각하는 모델이다. 예를 들어 div라는 객체는 텍스트 노드,자식 노드 등등 하위의 어떤 값을 가지고 있다. 이런 구조를 알고리즘에서와 같은 트리 구조라고 한다. DOM은 즉 트리구조이다. 허나 DOM 트리중 하나가 수정될 때마다 모든 DOM을 뒤지고 수장헐걸 찾고 싹 수정을 하면 너무 ㅍ ㅣㄹ요없는 연산이 많이 발생하게된다. 그래서 등장한게 이 가상돔이다. 가상돔은 메모리 상에서 돌아가는 가짜 DOM이라고 생각하면된다.
- 가상돔의 실행 방식 : 기존 DOM과 어떤 행동 후 새로 그린 DOM(가상 돔에 올라갔다고 표현)을 비교해서 수정된 부분만 찾아내서 갈아끼워준다. 이렇게 돔 업데이트 처리를 간결하게 처리할 수 있다. 여기서 DOM을 새로 그리는건 처음 페이지 진입시와 데이터가 변했을때 발생한다.
- DOM이 정말 그렇게 느린가 ? 에 대해서는 반은 맞고 반은 틀리다. DOM은 사이트 구조에 따라서 가상돔을 쓰는 것보다 훨씬 성능이 좋을 수 있고 느릴수도있다. 예를들면 정보만을 보여주는 페이지 같은것은 첫 페이지 로드시에 새로운 DOM을 또 그리는것을 하게되면 더 느려지지 않겠는가? 이런 느낌이라고 볼 수 있다.

## 라이프 사이클이란?
- 컴포넌트의 라이프 사이클(=컴포넌트 생명주기)은 정말 중요한 개념이다. 컴포넌트가 렌더링을 준비하는 순간부터, 페이지에서 사라질때 까지가 라이프 사이클이다. 공식문서를 살펴보면 매우 자세하게 다루어져있다. https://ko.reactjs.org/docs/state-and-lifecycle.html <-- react공식문서

![라이프사이클](https://user-images.githubusercontent.com/59644518/123537619-5a37a200-d76b-11eb-90fe-d7ceb18f2f73.png)

위 그림은 라이프 사이클이 어떻게 흘러가는지를 나타낸 도표이다.

- 컴포넌트는 생성되고 수정(업데이트)되고 사라진다. 생성은 맨 처음 컴포넌트를 불러오는 단계이고 수정은 사용자의 행동으로 데이터가 바뀌거나 부모 컴포넌트가 렌더링할때 업데이트가 된다. 간단하게 보자면 1. props가 바뀔때 2. state가 바뀔 때 3. 부모 컴포넌트가 업데이트 되었을때(=리렌더링했을 때) 4. 또는 강제로 업데이트 했을 경우 (forceUpdate()를 통해 강제로 컴포넌트 업데이트가 가능)


## 라이프 사이클 함수
- 라이프 사이클 함수는 클래스형 컴포넌트에서만 사용할 수 있다. 라이프 사이클을 아는건 매우중요한데 왜 클래스형 컴포넌트보다 함수형 컴포넌트를 더 많이쓰는지 의문이 들수있다. 그건 앞선 component 정리 내용에서 말했듯이 공식사이트에서 함수형 컴포넌트를 더 권장하기 때문이다. 또 리액트는 16.8버전부터 React Hooks의 등장으로 라이프 사이클 함수를 대체할 수 있게되었다. 그럼 함수들에 대해서 알아보자

1. constructor() : 생성자 함수라고도 부른다. 컴포넌트가 생성되면 가장 처음 호출된다.
2. render() : 컴포넌트의 모양을 정의하는 녀석이다. 여기에서도 state,props에 접근해서 데이터를 보여줄 수있다. 리액트 요소들을 항상 return에 넣어서 반환해주지 않았는가? 또 render()안에 들어갈 내용은 컴포넌트의 모양에만 관여하는 것이 가장 좋다. state나 props를 건드려 데이터를 수정하려고 하면 안된다.
3. componentDidMount() : 컴포넌트가 화면에 나타나는 것을 마운트(Mount)한다고 표현한다. didMount()는 마운트가 완료되었다. 라는 말이다. 이 함수는 첫번째 렌더링을 마친 후에만 딱 한 번 실행된다. 컴포넌트가 리렌더링할때에는 실행되지 않는다. 보통은 이 안에서 ajax요청, 이벤트 등록, 함수 호출 등의 작업을 처리한다. 또 이미 가상돔이 실제돔으로 올라간 후이기 때문에 DOM관련 처리를 해도 된다.
4. componentDidUpdate() : DidMount()가 첫 렌더링 후에 호출 되는 함수라면, DidUpdate()는 리렌더링을 완료한 후 실행되는 함수이다. 이 함수에는 중요한 파라미터가 2가지 있는데 prevProps와 prevState이다. 각각 업데이트 되기 전의 props와state이다. 이전 데이터와 비교할 일이 있으면 가져다 사용하면된다. DidUpdate()가 실행될 때도 가상돔이 실제돔으로 올라간 후이기 때문에 DOM관련 처리를 해도된다.
5. componentWillUnmount() : 컴포넌트가 DOM에서 제거 될 때 실행하는 함수이다. 만약 우리가 스크롤 위치 추적이나 어떤 이벤트 리스너를 등록했다면 여기에서 꼭 헤제를 해줘야한다. 컴포넌트 없이 이벤트를 남겨두면 안되기 때문이다. 
